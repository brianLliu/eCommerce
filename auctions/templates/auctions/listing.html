{% extends "auctions/layout.html" %}

{% block body %}
    <h1>Listing: {{ auction.title }}</h1>

    <!-- Add to watchlist -->
    {% if user.is_authenticated %}
        <form action="{% url 'modify_watchlist' auction.id %}" method="post">
            {% csrf_token %}
            {% if existing %}
                <button type="submit" name="watchlist" value="0" class="btn btn-outline-danger btn-sm" >
                    Remove from watchlist 
                </button>
            {% else %}
                <button type="submit" name="watchlist" value="1" class="btn btn-outline-success btn-sm">
                    Add to watchlist 
                </button>
            {% endif %}
        </form>
    {% endif %}


    <img src="{{ auction.photo|safe }}" alt="didn't find image " style=" max-height: 300px;">
    <p>{{ auction.description }}</p>
    <h2>$
        {% if not auction.current_bid %}
            {{ auction.starting_bid }}
        {% else %}
            {{ auction.current_bid }}
        {% endif %}
    </h2>

    <!-- Bid -->
    {% if user.is_authenticated %}
        <form action="{% url 'make_bid' auction.id %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <input class="form-control" type="number" step="0.01" name="bid" placeholder="Bid">
            </div>
            <input class="btn btn-primary" type="submit" value="Submit">
        </form>
    {% endif %}

    <h2>Details</h2>
    <ul>
        <li>Listed by {{ auction.seller }} </li>
        <li>
            {% if auction.category %}
                Category: {{ auction.category }}
            {% else %}
                Category: No Category Listed
            {% endif %}
        </li>
    </ul>

{% endblock %}